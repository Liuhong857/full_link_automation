<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>first_page</title>
    <link rel="stylesheet" href="/static/commons.css">

</head>
<body>
    <div  style="background-color: lightgray;margin: 38px 0px;height: 58px;width: 100%">
        <h1 style="color: orange;text-align: center;line-height: 58px">
            橙联自动化平台
        </h1>
    </div>
    <div  style="height:800px;width: 100%;display: flex ">
        <div style="height: 400px;width: 15%;border: 1px solid blanchedalmond;display: block" >
            <div id="firstpaneDiv" class="menu_list">
                <h3 class="menu_head current">接口数据</h3>
                <div style="display:block" class="menu_nva">
                    <a href="/page/main/">接口数据维护</a>
                    <a href="/page/main/Associated_api/">关联接口配置</a>
                    <a href="#">日志管理</a>
                    <a href="#">角色管理</a>
                    <a href="#">编码管理</a>
                    <a href="#">操作日志</a>
                    <a href="#">流程管理</a>
                </div>
                <h3 class="menu_head">xxx菜单1</h3>
                <div style="display:none" class="menu_nva">
                    <a href="#">用例1xx</a>
                    <a href="#">用例2xx</a>
                    <a href="#">用例3xx</a>
                    <a href="#">用例4xx</a>
                    <a href="#">用例5xx</a>
                    <a href="#">用例6xx</a>
                    <a href="#">用例7xx</a>
                    <a href="#">用例8xx</a>
                </div>
                <h3 class="menu_head">xxx菜单2</h3>
                <div style="display:none" class="menu_nva">
                    <a href="#">用例1xx</a>
                    <a href="#">用例2xx</a>
                    <a href="#">用例3xx</a>
                    <a href="#">用例4xx</a>
                    <a href="#">用例5xx</a>
                    <a href="#">用例6xx</a>
                    <a href="#">用例7xx</a>
                    <a href="#">用例8xx</a>
                </div>
                <h3 class="menu_head">xxx菜单3</h3>
                <div style="display:none" class="menu_nva">
                    <a href="#">用例1xx</a>
                    <a href="#">用例2xx</a>
                    <a href="#">用例3xx</a>
                    <a href="#">用例4xx</a>
                    <a href="#">用例5xx</a>
                    <a href="#">用例6xx</a>
                    <a href="#">用例7xx</a>
                    <a href="#">用例8xx</a>
                </div>
                <h3 class="menu_head">xxx菜单4</h3>
                <div style="display:none" class="menu_nva">
                    <a href="#">用例1xx</a>
                    <a href="#">用例2xx</a>
                    <a href="#">用例3xx</a>
                    <a href="#">用例4xx</a>
                    <a href="#">用例5xx</a>
                    <a href="#">用例6xx</a>
                    <a href="#">用例7xx</a>
                    <a href="#">用例8xx</a>
                </div>
                <h3 class="menu_head">xxx菜单5</h3>
                <div style="display:none" class="menu_nva">
                    <a href="#">用例1xx</a>
                    <a href="#">用例2xx</a>
                    <a href="#">用例3xx</a>
                    <a href="#">用例4xx</a>
                    <a href="#">用例5xx</a>
                    <a href="#">用例6xx</a>
                    <a href="#">用例7xx</a>
                    <a href="#">用例8xx</a>


                </div>

            </div>
        </div>
        <div style="width: 83%;display: block;margin-left: 30px; border-right: 1px solid lightgray;">
            <div style="width: 90%;height: 38px;margin-top: 30px;margin-left: 40px">
                <form id="form1" action="/page/main/select/" method="POST">

                    <label for="api_name" class="jq_name">接口名称:</label>
                    <input type="text" name="api_name" placeholder="自定义">

                    <label for="project" class="jq_name">项目类型:</label>
                    <input name="project" type="text">

                    <label for="create_user" class="jq_name">创建人:</label>
                    <input name="create_user" type="text">
                    <input type="submit" class="hide" id="submit_hide">
                </form>

            </div>

            <div style="width: 90%; display: block">
                <div style="height: 38px">
{#                    <a href="/page/main/select/"><input id="s1"  type="button" value="查询" class="jq_button"></a>#}
                    <input id="s1"  type="button" value="查询" class="jq_button">
                    <input id="a1" type="button" value="新增" class="jq_button">
{#                    <input id="u1" type="button" value="修改" class="jq_button">#}
{#                    <input id="d1" type="button" value="删除" class="jq_button">#}

                 </div>
                <div style="width: 100%;height: 38px; display: block">
                    <table style="width: 90%">
                        <thead style="width: 80%">
                            <tr>
                                <th style="border:  1px solid gray;width: 1%">
                                    <input type="checkbox">
                                </th>
                                <th class="jq_th">
                                    <div>项目名称</div>
                                </th>
                                <th class="jq_th">
                                    <div>接口名称</div>
                                </th>
                                <th class="jq_th" style="width: 9%">
                                    <div>返回编码</div>
                                </th>

                                <th class="jq_th" style="width: 13%">
                                    <div>创建时间</div>
                                </th>

                                <th class="jq_th">
                                    <div>修改人</div>
                                </th>
                                <th class="jq_th" style="width: 11%">
                                    <div>操作</div>
                                </th>
                        </thead>
                    </table>

                </div>

                <div style="width: 100%;min-height: 350px;border: 1px solid gray ">
                    <table style="height: 38px;width: 90%;table-layout: fixed;word-break: break-all;">
                        <thead style="width: 80%;max-height: 40px;" >
                            {% for row in data  %}
                                <tr>

                                    <td style="width: 2%;border: 1px solid gray"><input type="checkbox"></td>
                                    <td class="jq_th" style="text-align: center">{{ row.project}}</td>
                                    <td class="jq_th" style="text-align: center">{{ row.api_name }}</td>
                                    <td class="jq_th" style="width: 9%;text-align: center;">{{ row.api_code }}</td>
                                    <td class="jq_th" style="width: 13% ;text-align: center">{{ row.create_time }}</td>
                                    <td class="jq_th" style="text-align: center">{{ row.modify_user_code }}</td>
                                    <td class="jq_th" style="text-align: center;width: 11%">
                                        <a style="text-decoration: none;color: orange" href="/page/main/detail/?nid={{ row.id }}">详情</a>
                                        <a style="text-decoration: none;color: orange" href="/page/main/modify/?nid={{ row.id }}">修改</a>
                                        <a style="text-decoration: none;color: orange" href="/page/main/delete/?nid={{ row.id }}">删除</a>
                                        <a style="text-decoration: none;color: orange" href="/page/main/execute/?nid={{ row.id }}">执行</a>
                                    </td>



                                </tr>

                            {% endfor %}
                        </thead>

                    </table>

                </div>

            </div>

        </div>


    </div>

    <div class="add_css hide" id="add_hide">
        <div name="add" style="margin: 10px 0px 10px 0px;color: black;background-color: darkgrey;font-size: 20px">
            新增
        </div>
        <form action="/page/main/" method="POST" onsubmit="return add_data(this)">
            <div style="width: 80%;display:flex;">
                <div style="width: 100px;text-align: center">
                    项目名称:
                </div>
                <input type="text" name="project_add" style="width: 200px"  placeholder="请输入项目英文名称">
                <div style=" width: 100px;display:flex;justify-content: center;align-items: center;">
                    接口名称:
                </div>
                <input type="text" name="project_name_add" style="width: 200px" placeholder="请输入接口名称">
            </div>
            <span id="api_project_error" style="color: red;margin-left: 100px"></span>
            <span id="api_name_error" style="color: red;margin-left: 160px"></span>
            <div style="width: 80%;display:flex;margin-top: 10px">
                <div style="width: 100px;text-align: center">
                    URL:
                </div>
                <input type="text" name="url_add" style="width: 200px" placeholder="请输入URL">
                <div style=" width: 100px;display:flex;justify-content: center;align-items: center;">
                    method:
                </div>
                <input type="text" name="method_add" style="width: 200px" placeholder="请输入请求方式">
            </div>
            <span id="api_url_error" style="color: red;margin-left: 100px"></span>
            <span id="api_method_error" style="color: red;margin-left: 190px"></span>
            <div style="width: 80%;display:flex;margin-top: 10px">
                <div style=" width: 100px;display:flex;justify-content: center;align-items: center;">
                    请求头:
                </div>
                <textarea type="text" name="header_add" style="height: 300px;width: 200px" placeholder="请输入请求头，必须为字典格式"></textarea>
                <div style=" width: 100px;display:flex;justify-content: center;align-items: center;">
                    报文:
                </div>
                <textarea type="text" name="data_add" style="height: 300px;width: 200px" placeholder="请输入报文，必须为字典格式"></textarea>
            </div>
            <span id="api_header_error" style="color: red;margin-left: 100px"></span>
            <span id="api_data_error" style="color: red;margin-left: 170px"></span>
            <input name="operation_name" type="text" value="add" style="display: none">
            <div style="margin-bottom: 10px">
                <input id="i1" type="submit" value="提交" >
                <a href="/page/main/select/"><input id="i2" type="button" value="取消"></a>

            </div>
        </form>

    </div>
    <div id="d1"  class="Tips_css hide">

        <div style="display: inline-block;font-size: 18px;color: #1c2438;font-weight: 700">
            提示：
        </div>
        <div style="text-align: center;">你是否确定删除吗？
            <div style="color: red">删除是不可复原的</div>
        </div>
        <div style="position: relative;width: 58px;height: 38px ;display: block;margin: 0 auto">
            <button type="button" style="color: #fff;background-color: #2d8cf0;position: absolute;left: 180px;top: 40px">
                <span><a href="http://www.baidu.com">确认</a></span>
            </button>
        </div>
        <div style="position: relative;width: 58px;height: 38px ;display: block;margin: 0 auto">
            <button id="cancle1" type="button" style="position: absolute; left: 110px;top: 2px">
                <span>取消</span>
            </button>
        </div>
    </div>



    <script src="/static/jquery.js"></script>
    <script>

        $('#i2').click(function () {
            $(this).parent().parent().parent().addClass('hide');
            alert('取消成功')
        });
        $('#i1').click(function () {
            var result=add_data(this);
            if(result==true){
                $(this).parent().parent().parent().addClass('hide');
            alert('提交成功')
            }

        });
        $('#a1').click(function () {
            $(this).parent().parent().parent().parent().next().removeClass('hide');
            console.log(2)

        });
        {#$('#s1').click(function () {#}
        {#   var api_name = $("#form1").children().next().val();#}
        {#   var project = $("#form1").children().next().next().next().val();#}
        {#   var create_user = $("#form1").children().next().next().next().next().next().val();#}
           {#console.log('api_name;',api_name,'project:',project,'create_user:',create_user);#}
        {#   //提交表单#}
        {#   $.ajax({#}
        {#        url:"select/",#}
        {#        type:"get",#}
        {#        dataType:"json",#}
        {#        data:{"operation_name":"select","api_name":api_name,"project":project,"create_user":create_user},#}
        {#        success:function (data) {#}
        {#            console.log(data)#}
        {#        }#}
        {#    })#}
        {##}
        {##}
        {##}
        {# };#}
        $("#s1").click(function(){
            $("#submit_hide").trigger('click');
          });
        function add_data(add) {
            var api_project = add.project_add.value;
            var api_name = add.project_name_add.value;
            var api_url = add.url_add.value;
            var api_method = add.method_add.value;
            var api_header = add.header_add.value;
            var api_data = add.data_add.value;

            var api_project_error= document.getElementById('api_project_error');
            var api_name_error= document.getElementById('api_name_error');
            var api_url_error= document.getElementById('api_url_error');
            var api_method_error= document.getElementById('api_method_error');
            var api_header_error= document.getElementById('api_header_error');
            var api_data_error= document.getElementById('api_data_error');

            var isSubmit = true;
            if (api_project ==""){
                isSubmit=false;
                api_project_error.innerHTML='项目名称不能为空！'

            };
            if (api_name ==""){
                isSubmit=false;
                api_name_error.innerHTML='接口名称不能为空！'

            };
            if (api_url ==""){
                isSubmit=false;
                api_url_error.innerHTML='URL不能为空！'

            };

            if (api_method ==""){
                isSubmit=false;
                api_method_error.innerHTML='请求方式不能为空！'

            };
            if (api_header ==""){
                isSubmit=false;
                api_header_error.innerHTML='请求头不能为空！'

            };
            if (api_data ==""){
                isSubmit=false;
                api_data_error.innerHTML='请求报文不能为空！'

            };
            if(!isSubmit){
                //阻止表单提交
                return false;
            }


        };
        $(document).ready(function () {
            $("#firstpaneDiv .menu_nva:eq(0)").show();
            $("#firstpaneDiv h3.menu_head").click(function () {
                $(this).addClass("current").next("div.menu_nva").slideToggle(200).siblings("div.menu_nva").slideUp("slow");
                $(this).siblings().removeClass("current");
            });
            $("#secondpane .menu_nva:eq(0)").show();
            $("#secondpane h3.menu_head").mouseover(function () {
                $(this).addClass("current").next("div.menu_nva").slideDown(400).siblings("div.menu_nva").slideUp("slow");
                $(this).siblings().removeClass("current");
            });
        });

    </script>
</body>
</html>